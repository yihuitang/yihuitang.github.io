<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js/dist/video-js.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@videojs/themes@1/dist/fantasy/index.css">
<script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lettering.js/0.6.1/jquery.lettering.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/video.js/dist/video.min.js"></script>
<script src="/script/settheme.js"></script><title data-react-helmet="true">发布 CodeLab Adapter 3.3.1 | CodeLab</title><meta data-react-helmet="true" property="og:title" content="发布 CodeLab Adapter 3.3.1 | CodeLab"><meta data-react-helmet="true" name="description" content="技术使普通的物理材料（纸和泥土，卡片和玩具车）栩栩如生。 – Dynamicland"><meta data-react-helmet="true" property="og:description" content="技术使普通的物理材料（纸和泥土，卡片和玩具车）栩栩如生。 – Dynamicland"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/styles.84b1147b.css">
<link rel="preload" href="/styles.71fb8b2a.js" as="script">
<link rel="preload" href="/runtime~main.676e3002.js" as="script">
<link rel="preload" href="/main.aad9f3c1.js" as="script">
<link rel="preload" href="/1.af123087.js" as="script">
<link rel="preload" href="/2.2944d33e.js" as="script">
<link rel="preload" href="/3.ffbe02f2.js" as="script">
<link rel="preload" href="/ccc49370.9d6295d9.js" as="script">
<link rel="preload" href="/8c7f075d.3e733c2f.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a><a href="https://create.codelab.club" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">创作平台</a><a class="navbar__item navbar__link" href="/projects">玩给你看</a><a href="https://create.codelab.club/ideas#course" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">课程</a><a href="https://adapter.codelab.club/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">博客</a><a class="navbar__item navbar__link" href="/blog/2020/09/25/about-codelab-2020">关于我们</a><a href="https://github.com/CodeLabClub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://create.codelab.club" target="_blank" rel="noopener noreferrer" class="menu__link">创作平台</a></li><li class="menu__list-item"><a class="menu__link" href="/projects">玩给你看</a></li><li class="menu__list-item"><a href="https://create.codelab.club/ideas#course" target="_blank" rel="noopener noreferrer" class="menu__link">课程</a></li><li class="menu__list-item"><a href="https://adapter.codelab.club/" target="_blank" rel="noopener noreferrer" class="menu__link">文档</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/2020/09/25/about-codelab-2020">关于我们</a></li><li class="menu__list-item"><a href="https://github.com/CodeLabClub" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_kDB-">发布 CodeLab Adapter 3.3.1</h1><div class="margin-vert--md"><time datetime="2020-06-07T00:00:00.000Z" class="blogPostDate_2HVl">2020年6月7日   · 2 min 阅读时长</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a target="_blank" rel="noreferrer noopener">CodeLab</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><img class="img-responsive" src="http://adapter.codelab.club/img/WechatIMG1946.jpeg"><blockquote><p>技术使普通的物理材料（纸和泥土，卡片和玩具车）栩栩如生。 – Dynamicland</p></blockquote><p>3.3.1 包含以下重大更新。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="重大更新"></a>重大更新<a aria-hidden="true" tabindex="-1" class="hash-link" href="#重大更新" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dynamictable"></a>DynamicTable<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dynamictable" title="Direct link to heading">#</a></h2><p><code>3.3.1</code> 支持 DynamicTable。</p><p>DynamicTable 的核心是<a href="https://github.com/CodeLabClub/codelab_adapter_extensions/blob/master/nodes_v3/node_physical_blocks.py">node_physical_blocks</a> 插件, 该插件已经内置在 <code>3.3.1</code> 版本中。</p><p>DynamicTable 是:</p><ul><li>集体想象的产物。</li><li>是一个工具包(toolkit)，而不是一个 APP<ul><li>鼓励创作者使用剪刀、纸张、玩具等事物进行创作。</li></ul></li><li>是一种开放的可编程环境<ul><li>使用 Scratch 即时构建应用程序。</li><li>基于 CodeLab Adapter 连接万物<ul><li>与 CodeLab 可编程空间拥有一样的设计理念，可以视为它的一个 micro 版本</li></ul></li></ul></li><li>实物与虚拟事物融合在桌面上，可交互<ul><li>交互的规则由用户自定义</li><li>在环境中,洞悉(seeing)事物的内部/运行状态，以便于创作者真正理解复杂事物</li></ul></li></ul><p>我们先来看几个在 DynamicTable 构建的项目:</p><video width="80%" src="https://adapter.codelab.club/video/1590154622682774.mp4" controls=""></video><video width="80%" src="https://adapter.codelab.club/video/1589459621915320.mp4" controls=""></video><video width="80%" src="https://adapter.codelab.club/video/1590665913541756.mp4" controls=""></video><p>关于 DynamicTable 的更多信息， 请参考:</p><ul><li><a href="https://www.codelab.club/blog/codelab-dynamictable-a-seeing-world/" target="_blank" rel="noopener noreferrer">CodeLab DynamicTable: A Seeing World</a></li><li><a href="https://www.codelab.club/blog/codelab-dynamictable-an-instance/" target="_blank" rel="noopener noreferrer">CodeLab DynamicTable: 一个可实施的技术方案</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="新的-web-ui"></a>新的 Web UI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#新的-web-ui" title="Direct link to heading">#</a></h2><blockquote><p>Adapter 缺乏一个体面的 UI.</p></blockquote><p>和许多开源项目一样，CodeLab Adapter 的 UI 有些简陋。</p><p>近期我们的合作方 Longan 团队正将 CodeLab Adapter 实施于商业项目，他们为 Adapter 重新设计了 UI:</p><p><img src="https://adapter.codelab.club/img/15b06590c09a5212db8bb3cb7a0f1620.png"></p><p>新的 UI，致力于对用户更加友好和可理解，大家如果有什么更好的建议, 欢迎在 <a href="https://github.com/CodeLabClub/codelab_adapter_extensions/issues" target="_blank" rel="noopener noreferrer">issue</a> 中反馈，我们会持续迭代它。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="新增插件"></a>新增插件<a aria-hidden="true" tabindex="-1" class="hash-link" href="#新增插件" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="node_physical_blocks-插件"></a>node_physical_blocks 插件<a aria-hidden="true" tabindex="-1" class="hash-link" href="#node_physical_blocks-插件" title="Direct link to heading">#</a></h3><p>主要用于构建 DynamicTable。前边已经论述。</p><p>当然该插件也可以用于其他用途。</p><p><img src="https://adapter.codelab.club/img/0bc248880a7066575ce7d9e4a4a977ec.png"></p><p>诸如周末活动的参与者 @taotao 今天在 Neverland 里编程时发现，在他没有动手拧动贴有 marker 的纸质方向盘时，marker 的角度信息仍然会发生细微变化，一开始我们都感到疑惑，以为是个bug。但经过排查，发现原因是因为摄像机能捕获到肉眼不可见的 marker 位置变化, 而 marker 的位置变化则由桌面的微小震动引起(通过实验获知)，所以它可以用于检测桌子的震动！</p><p>以上是程序代码，从舞台区的变量值，可以看到精度很高，能检测微小的震动引起的 marker 空间位置变化信息。而 Scratch 的动态交互式风格，让@taotao 在 debug 时发现了这个细微变化，提出这个看起来像是 bug 的问题，它实际是一个发现！</p><p>如果进一步放大震动，甚至有可能用于检测地震。</p><p>这是我们设计 node_physical_blocks 插件时，未曾想到的应用场景，由一个编程入门者的疑惑引起的发现。</p><p>我试着从今天的例子中，寻找原因。CodeLab 的活动围绕项目以及编程者的兴趣展开，由于其非体系化的结构，允许编程者自由探索活动过程的意外问题，而不是急着抵达某种教科书预设的知识或是算法技巧。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="node_eim_monitor-插件"></a>node_eim_monitor 插件<a aria-hidden="true" tabindex="-1" class="hash-link" href="#node_eim_monitor-插件" title="Direct link to heading">#</a></h3><p>如果你是新手，想使用 Python 增强 Scratch，<a href="https://adapter.codelab.club/extension_guide/eim_monitor/" target="_blank" rel="noopener noreferrer">EIM Monitor</a> 插件可能是最佳选择。</p><p>EIM Monitor 致力于在灵活与简易之间取得一个平衡，让新手能够轻松起步。</p><p>此前 EIM Monitor 只有 Extension 版本。如果你想引入 Python 社区的第三方库，它便无法满足。</p><p>于是我们构建了 EIM Monitor 的 <a href="https://adapter.codelab.club/dev_guide/Adapter-Node/" target="_blank" rel="noopener noreferrer">Node</a> 版本, 保持 EIM Monitor 简易性的同时，允许用户使用 Python 社区的任何第三方库。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="yanshee-插件"></a>Yanshee 插件<a aria-hidden="true" tabindex="-1" class="hash-link" href="#yanshee-插件" title="Direct link to heading">#</a></h3><p><a href="https://www.ubtechedu.com/show-59.html">Yanshee</a> 是一个开源人形机器人教学平台， 面向高中和大学生开发，提供专业开源学习软件。</p><p>Yanshee 是一个开放的硬件平台，采用 Raspberry Pi + STM32 开放式硬件平台架构，内嵌陀螺仪，开放 GPIO 接口。</p><p>采用基于 Linux 的开源软件架构，支持用户直接调用并集成海量的 Raspberry Pi 的开源软件模块</p><video width="50%" src="https://adapter.codelab.club/video/1589960907435316.mp4" controls=""></video><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="分离-adapter-client"></a>分离 Adapter client<a aria-hidden="true" tabindex="-1" class="hash-link" href="#分离-adapter-client" title="Direct link to heading">#</a></h2><p>重构前端 adapter client，使其独立成一个类:<a href="https://github.com/CodeLabClub/scratch3_eim/blob/v3/codelab_adapter_base.js">codelab_adapter_client.js</a>, 方便第三方开发者集成，或用于自定义 UI。</p><p>目前 EIM 插件和 Web UI 都在使用它，源码是开放的。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="增强自省能力"></a>增强自省能力<a aria-hidden="true" tabindex="-1" class="hash-link" href="#增强自省能力" title="Direct link to heading">#</a></h2><p>CodeLab Scratch EIM 插件增加了 <code>is Adapter running</code> 积木，从而允许用户动态得获取 Adapter 运行情况。</p><p><img src="https://adapter.codelab.club/img/206dfb1db7d27c3302b7f4a35796fc06.png"></p><p>典型的用例是，当项目被社区用户打开时，可以告知用户是否需要启动 Adapter。</p><p>Adapter Version 目前已经添加到 env 中，可供外部应用程序查询，以便于协同合作。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="提升安全性"></a>提升安全性<a aria-hidden="true" tabindex="-1" class="hash-link" href="#提升安全性" title="Direct link to heading">#</a></h2><ul><li>提升所有用到 <code>eval</code> 函数的插件的安全性。</li><li>除了一些受信任域名，从其他域名连接 Adapter，需要手动输入 token（在 Web UI 中可以获取）。</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="插件增强--bug-修复"></a>插件增强 &amp;&amp; bug 修复<a aria-hidden="true" tabindex="-1" class="hash-link" href="#插件增强--bug-修复" title="Direct link to heading">#</a></h1><ul><li>修复关闭 node 引起的问题。</li><li>修复 node_minecraft 和 node_raspberrypi 的 bug。在 Scratch 中填入设备 IP，而不需要手动修改 Adapter 插件。</li><li>增强 CodeLab Scratch json 插件，并<a href="https://adapter.codelab.club/extension_guide/json/" target="_blank" rel="noopener noreferrer">添加社区文档</a>.</li><li><a href="http://www.concentric-circle.com/author/admin/" target="_blank" rel="noopener noreferrer">@Hanson 同学</a>为我们构建了 Box2D 插件的 <a href="https://adapter.codelab.club/extension_guide/Box2D/" target="_blank" rel="noopener noreferrer">文档</a></li><li>Cozmo/Vector 社区用户@moxley71提到说 <code>I’ve been playing with the Codelabs setup for Vector, but I am unable to work out how to return status variables from Vector.</code>，我们之前只在 Cozmo 中完成这个功能，此次更新，将 Cozmo 的 sensor/event 迁移到了 Vector 插件中。<ul><li>哈哈，也贴上@moxley71看到我们的更新后的吹捧 <code>Wow, fantastic response time. I wasn’t expecting this to be looked at, let alone addressed for at least a week. You sir, are a star! </code></li></ul></li><li>改进 extension_webserver 插件:<a href="https://adapter.codelab.club/extension_guide/webserver/" target="_blank" rel="noopener noreferrer">文档</a>，用户可以在 Adapter 中轻松构建自己的第一个网站。</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="开始使用"></a>开始使用<a aria-hidden="true" tabindex="-1" class="hash-link" href="#开始使用" title="Direct link to heading">#</a></h1><p><a href="https://adapter.codelab.club/user_guide/install/" target="_blank" rel="noopener noreferrer">下载最新 Adapter</a>。</p><p>配合 <a href="https://scratch3v3.codelab.club/" target="_blank" rel="noopener noreferrer">CodeLab Scratch</a> 使用时，建议刷新浏览器缓存。</p></section><footer class="row margin-vert--lg"><div class="col"><strong>标签：</strong><a class="margin-horiz--sm" href="/blog/tags/code-lab相关">CodeLab相关</a><a class="margin-horiz--sm" href="/blog/tags/技术文档">技术文档</a><a class="margin-horiz--sm" href="/blog/tags/adapter">Adapter</a></div></footer></article><div><a href="https://github.com/CodeLabClub/NewCodeLabWeb/tree/master/blog/3_3_1-release.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/06/11/直播"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">« 在线参观CodeLab Neverland</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/06/05/纸糊方向盘"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">DynamicTable 之 纸糊方向盘 »</div></a></div></nav></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="http://discuss.codelab.club/" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="http://discuss.codelab.club/">CodeLab 论坛</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/CodeLab-handbook">手册</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2020/08/20/tools">下载</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2020/04/01/欢迎关注CodeLab微信公众号">微信公众号</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.zhihu.com/people/codelab-83" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://www.zhihu.com/people/codelab-83">在知乎</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://space.bilibili.com/607249092" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://space.bilibili.com/607249092">在B站</a></li></ul></div></div><div class="text--center"><div>Copyright © 2022 CodeLab&nbsp&nbsp&nbsp<a style="color:white" target="_blank" href="https://beian.miit.gov.cn/">粤ICP备2021005905号-1</a><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3be250eb38d350c4a750c4b0bbfe513e";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></div></div></div></footer></div>
<script src="/styles.71fb8b2a.js"></script>
<script src="/runtime~main.676e3002.js"></script>
<script src="/main.aad9f3c1.js"></script>
<script src="/1.af123087.js"></script>
<script src="/2.2944d33e.js"></script>
<script src="/3.ffbe02f2.js"></script>
<script src="/ccc49370.9d6295d9.js"></script>
<script src="/8c7f075d.3e733c2f.js"></script>
</body>
</html>