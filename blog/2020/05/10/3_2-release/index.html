<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js/dist/video-js.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@videojs/themes@1/dist/fantasy/index.css">
<script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lettering.js/0.6.1/jquery.lettering.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/video.js/dist/video.min.js"></script>
<script src="/script/settheme.js"></script><title data-react-helmet="true">发布 CodeLab Adapter 3.2 | CodeLab</title><meta data-react-helmet="true" property="og:title" content="发布 CodeLab Adapter 3.2 | CodeLab"><meta data-react-helmet="true" name="description" content="Playful Programming Centre"><meta data-react-helmet="true" property="og:description" content="Playful Programming Centre"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/styles.84b1147b.css">
<link rel="preload" href="/styles.71fb8b2a.js" as="script">
<link rel="preload" href="/runtime~main.676e3002.js" as="script">
<link rel="preload" href="/main.aad9f3c1.js" as="script">
<link rel="preload" href="/1.af123087.js" as="script">
<link rel="preload" href="/2.2944d33e.js" as="script">
<link rel="preload" href="/3.ffbe02f2.js" as="script">
<link rel="preload" href="/ccc49370.9d6295d9.js" as="script">
<link rel="preload" href="/9b708f43.a8a3c65e.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a><a href="https://create.codelab.club" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">创作平台</a><a class="navbar__item navbar__link" href="/projects">玩给你看</a><a href="https://create.codelab.club/ideas#course" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">课程</a><a href="https://adapter.codelab.club/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">博客</a><a class="navbar__item navbar__link" href="/blog/2020/09/25/about-codelab-2020">关于我们</a><a href="https://github.com/CodeLabClub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://create.codelab.club" target="_blank" rel="noopener noreferrer" class="menu__link">创作平台</a></li><li class="menu__list-item"><a class="menu__link" href="/projects">玩给你看</a></li><li class="menu__list-item"><a href="https://create.codelab.club/ideas#course" target="_blank" rel="noopener noreferrer" class="menu__link">课程</a></li><li class="menu__list-item"><a href="https://adapter.codelab.club/" target="_blank" rel="noopener noreferrer" class="menu__link">文档</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/2020/09/25/about-codelab-2020">关于我们</a></li><li class="menu__list-item"><a href="https://github.com/CodeLabClub" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_kDB-">发布 CodeLab Adapter 3.2</h1><div class="margin-vert--md"><time datetime="2020-05-10T00:00:00.000Z" class="blogPostDate_2HVl">2020年5月10日   · 3 min 阅读时长</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a target="_blank" rel="noreferrer noopener">CodeLab</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><img classnamename="img-responsive" src="https://adapter.codelab.club/img/42b96f90be7f9884c9702fc5cd5279fb.png"><blockquote><p>Playful Programming Centre</p></blockquote><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="前言"></a>前言<a aria-hidden="true" tabindex="-1" class="hash-link" href="#前言" title="Direct link to heading">#</a></h1><p>距离 <a href="https://www.codelab.club/blog/3-release/" target="_blank" rel="noopener noreferrer">CodeLab Adapter 3.0 发布</a>过去了 3 周有余，期间收到许多用户的邮件反馈，大家热心给出了改进建议和 bug 报告。</p><p>这段期间，根据大家的反馈迭代了若干个小版本，也为一些用户单独构建了一些版本，以服务于他们独特的用途。</p><p>3.2 是一个大版本，汇集了我们这段时间来的所有改进。</p><p>今后，每当发布大版本，我们会在博客里发一篇文章说明重大变更。(沿袭 <a href="https://open.edx.org/" target="_blank" rel="noopener noreferrer">Open edX</a> 社区类似的做法。)</p><p>至于常规版本的迭代日志，可参考<a href="https://adapter.codelab.club/changelog/" target="_blank" rel="noopener noreferrer">changelog</a>。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="先睹为快"></a>先睹为快<a aria-hidden="true" tabindex="-1" class="hash-link" href="#先睹为快" title="Direct link to heading">#</a></h1><p>CodeLab Adapter 3.2 的改进，主要围绕以下方面:</p><ul><li><strong>新增扩展</strong></li><li><strong>让连接无处不在</strong></li><li><strong>提升 Windows 平台的使用体验</strong></li><li><strong>增强自省能力</strong></li><li><strong>完善插件体系</strong></li></ul><p>以下逐条陈述。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="新增扩展"></a>新增扩展<a aria-hidden="true" tabindex="-1" class="hash-link" href="#新增扩展" title="Direct link to heading">#</a></h2><p>CodeLab Adapter v3 是一个高度可扩展的开放系统。将一个新的体系接入 CodeLab Adapter， 有时只需几分钟时间！</p><p>在 3.2 中，新增了以下扩展:</p><ul><li><a href="https://adapter.codelab.club/extension_guide/stage/" target="_blank" rel="noopener noreferrer">Stage</a></li><li><a href="https://adapter.codelab.club/extension_guide/rpi_gpio/" target="_blank" rel="noopener noreferrer">RaspberryPi GPIO</a></li><li><a href="https://adapter.codelab.club/extension_guide/minecraft/" target="_blank" rel="noopener noreferrer">Minecraft</a></li><li><a href="https://adapter.codelab.club/extension_guide/sonicPi/" target="_blank" rel="noopener noreferrer">Sonic Pi</a></li><li><a href="https://adapter.codelab.club/extension_guide/MQTT_Broker/" target="_blank" rel="noopener noreferrer">MQTT Broker</a></li><li><a href="https://adapter.codelab.club/extension_guide/MQTT_adapter/" target="_blank" rel="noopener noreferrer">MQTT Adapter</a></li><li><a href="https://adapter.codelab.club/extension_guide/Calypso/" target="_blank" rel="noopener noreferrer">Calypso</a></li></ul><p>其中 RaspberryPi，Minecraft，Sonic Pi 拥有巨大生态，用户社区从千万到百万级别不等。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="stage"></a><a href="https://adapter.codelab.club/extension_guide/stage/" target="_blank" rel="noopener noreferrer">Stage</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stage" title="Direct link to heading">#</a></h3><p>Stage 指 Scratch 的舞台区。</p><p><img src="https://adapter.codelab.club/img/307a089f4fc36348702fe4d98958ce30.png"></p><p>Adapter/Scratch Stage 插件允许将 Scratch 舞台区的图像（舞台或者摄像头图像）以 base64 的格式发往 Adapter。如此一来，你就可以构建 Adapter node/extension ，用作自定义图像处理程序！可以使用 神经网络 / OpenCV ... 来处理舞台区的内容，一切都由你决定，识别的结果将返回给 Scratch。</p><p>其他的用例，包括构建一个自动保存舞台状态的插件；或者构建自拍/美颜插件：）</p><p>需要配合 Scratch <code>图像识别</code> 插件中的积木一起使用。</p><p><img src="https://adapter.codelab.club/img/999e46633d51f05d58c863c698fcb109.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="raspberrypi-gpio"></a><a href="https://adapter.codelab.club/extension_guide/rpi_gpio/" target="_blank" rel="noopener noreferrer">RaspberryPi GPIO</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#raspberrypi-gpio" title="Direct link to heading">#</a></h3><p><img src="https://adapter.codelab.club/img/cb459aec0fc8b001c8f1f9e32b10d8f2.png"></p><p>树莓派是全球最流行的开源硬件之一，在疫情期间，更是被广泛使用，哥伦比亚将其用于制作呼吸机，有些硬件黑客则使用树莓派 DIY 口罩制作机，将自动生产的口罩赠送给附近医院。</p><p>树莓派通过 GPIO 引脚驱动物理/电器设备，所以 DIY 经常会用到 GPIO 。操作树莓派 GPIO 的工具里，<a href="https://gpiozero.readthedocs.io/en/stable/index.html">gpiozero</a>尤为出色，因其具有很好的可理解性（图形化未必意味着更好的可理解性），Python 之父也是 gpiozero 的粉丝。</p><p>为了充分利用 gpiozero，我们只对它做一层薄薄的包装(REPL), 使其在 Scratch 中可用，更多的自由度则留给了你。</p><p>树莓派高度灵活，难以积木化它的所有特性，那样并不会提高可理解性。 我们希望用户灵活使用 Python 去增强 Scratch ，更好的扩展模式可以参考<a href="https://adapter.codelab.club/extension_guide/extension_python_kernel/" target="_blank" rel="noopener noreferrer">Python eval kernel</a>。</p><p>当然， 一些功能是可以积木化的，期待你来提交 PR。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="minecraft"></a><a href="https://adapter.codelab.club/extension_guide/minecraft/" target="_blank" rel="noopener noreferrer">Minecraft</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#minecraft" title="Direct link to heading">#</a></h3><p><img src="https://adapter.codelab.club/img/WechatIMG1431.jpeg"></p><p>Minecraft（我的世界）是一款开放世界沙盒游戏，拥有惊人的自由度，它是有史以来最畅销的电子游戏，在儿童中尤其流行。</p><p>由于 COVID-19，提前结束这个学期后，MIT 学生在 Minecraft 上重建了 MIT 整个校园。校方还<a href="http://news.mit.edu/2020/building-and-reconnecting-mit-minecraft-0407" target="_blank" rel="noopener noreferrer">报道了这事</a>。</p><p><img src="https://adapter.codelab.club/img/ba660a0566b0e83a643e88da376f3140.png">.</p><p>Minecraft 插件将 Minecraft 接入 Adapter ，使游戏中的世界可以与现实世界随意互动！ 可以将 Scratch、乐高、 AI、 实物，以及任何你喜欢的东西都接入到游戏中，与游戏角色互动。</p><p>我们制作了一个入门 Demo:<a href="https://scratch3v3.codelab.club?sb3url=https://adapter.codelab.club/sb3/Scratch-mcTurtle.sb3">Scratch-mcTurtle</a>， 你可以从这里起步。它是一个运行在 Minecraft 世界里的 Turtle，将出现在主角周围， 推荐你飞到空中(空格)去看它的运行轨迹。</p><video src="https://adapter.codelab.club/video/1588665494072465.mp4" controls=""></video><p>如果你想做更多有趣的事，建议阅读<a href="stuffaboutcode.com/p/minecraft.html">minecraft</a>, 我们鼓励你去修改<a href="https://github.com/CodeLabClub/codelab_adapter_extensions/blob/master/nodes_v3/node_minecraft.py">插件源码</a>，去支持更多的对象。欢迎把你的修改结果提交到 CodeLab 源码仓库，分享给社区里的其他人用。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqtt-broker"></a><a href="https://adapter.codelab.club/extension_guide/MQTT_Broker/" target="_blank" rel="noopener noreferrer">MQTT Broker</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqtt-broker" title="Direct link to heading">#</a></h3><p>@云天 在 国内最大的 maker 社区 -- dfrobot 社区里分享了十来篇采用 CodeLab Adapter 构建项目的案例, 一些有趣的案例如:</p><video src="https://adapter.codelab.club/video/1589111397669473.mp4" controls=""></video><p>将 OpenCV 接入 CodeLab Adapter，与家居互动，挥手时显示运动区域的光晕，颇有钢铁侠的味道。</p><video src="https://adapter.codelab.club/video/1589111360787294.mp4" controls=""></video><p>使用 CodeLab Adapter 连接 Google Teachable Machine 和 Microbit，训练了一个口哨汤勺开关</p><p>他在 懒人系列之视控灯 项目里写道:</p><blockquote><p>CodeLab Scratch3+CodeLab Adapter+Python 完美搭配。以前我要实现类似功能，要通过一个中间者 MQTT，比如本地的像 Siot。</p></blockquote><p>CodeLab Adapter 的典型用途之一确实是 构建复杂连接的项目时，部分替代 MQTT。</p><p>但 MQTT 有其独特的价值，所以在 Adapter 3.2 中，有两个插件围绕 MQTT 。</p><p>MQTT Broker 插件允许你在本地轻松启动一个轻量级 MQTT Broker，这是一颗强劲的心脏。 轻量级，却高性能，采用 Adapter 内置的 <a href="https://hbmqtt.readthedocs.io/en/latest/index.html">hbmqtt</a>， 基于协程的并发能力，足以让你在树莓派上支撑起整个学校的物联网。</p><p>一个典型的使用场景是将各类支持 mqtt client 的硬件，接入 Adapter（你需要写一个 extension, 不过我们已经构建了一个:<a href="https://adapter.codelab.club/extension_guide/MQTT_adapter/" target="_blank" rel="noopener noreferrer">MQTT_adapter</a> ），方便你将 esp32、esp8266、掌控板等设备接入 Adapter 。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mqtt-adapter"></a><a href="https://adapter.codelab.club/extension_guide/MQTT_adapter/" target="_blank" rel="noopener noreferrer">MQTT Adapter</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mqtt-adapter" title="Direct link to heading">#</a></h3><p>MQTT Adapter 插件负责桥接 mqtt 与 Scratch/Adapter， 它展示我们在易用性上所做的努力。</p><p>原理很简单，它将来自 mqtt 的消息(mqtt topic:<code>to_scratch</code>)，转发到 eim 中，将 eim 中的消息转发到 mqtt(mqtt topic:<code>from_scratch</code>)。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="calypso"></a><a href="https://adapter.codelab.club/extension_guide/Calypso/" target="_blank" rel="noopener noreferrer">Calypso</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#calypso" title="Direct link to heading">#</a></h3><p><img src="https://adapter.codelab.club/img/5e2d27904616c6f685c439d933fa2ced.png"></p><p><a href="https://calypso.software/" target="_blank" rel="noopener noreferrer">Calypso</a> 是 CMU 大学七年来对儿童如何学习基于规则的机器人编程的研究成果。由<a href="https://en.wikipedia.org/wiki/David_S._Touretzky">David S. Touretzky</a>博士构建，他是 CMU 计算机科学和神经认知基础中心的研究教授。此外，Touretzky 一直活跃在互联网，主张言论自由。</p><p><a href="https://calypso.software/" target="_blank" rel="noopener noreferrer">Calypso</a>目前用于为 Cozmo 编程。被广泛用于 AI 教育项目.</p><video src="https://adapter.codelab.club/video/1589111342575217.mp4" controls=""></video><p>当 Cozmo 看到我表情悲伤时，将帮我升起窗帘: &quot;Give you some sunshine&quot;。</p><p>Cozmo 说 oh you are sad ，give you some sunshine。《Give Me Some Sunshine》是《三傻大闹宝莱坞》里的插曲。</p><p>这个例子很好展示了 设备与环境的互动。这种与环境的连接能力，允许大量有想象力且有温度的事情发生。更多理念，参考<a href="https://www.codelab.club/blog/design-principles-behind-neverland/" target="_blank" rel="noopener noreferrer">CodeLab 可编程空间 背后的理念与设计原则</a>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="让连接无处不在"></a>让连接无处不在<a aria-hidden="true" tabindex="-1" class="hash-link" href="#让连接无处不在" title="Direct link to heading">#</a></h2><p>Adapter 3.0 拥有强大的连接能力。</p><p>v3.2 在连接方面的主要工作是使其高度易用。</p><p><a href="https://adapter.codelab.club/dev_guide/Adapter-Node/" target="_blank" rel="noopener noreferrer">Adapter Node</a> 虽然能够将整个 Python 生态 接入到 Adapter 中， 但对于许多入门者，却可能缺乏 Python 相关的技能。</p><p>v3.2 使连接开箱可用，对于入门者，Ta 可以快速将自己感兴趣的系统，接入 Adapter 中；对于高阶用户，推荐使用<a href="https://adapter.codelab.club/dev_guide/Adapter-Node/" target="_blank" rel="noopener noreferrer">Adapter Node</a>，几乎拥有无限的自由。</p><blockquote><p>让简单的事情保持简单，让困难的事情变得可能 -- Alan Kay</p></blockquote><p>v3.2 中 Adapter 默认接收 EIM 消息请求，请求地址为:</p><p><code>https://codelab-adapter.codelab.club:12358/api/message/eim?message=hi</code></p><p>它只是简单 HTTP 请求，可以从任何地方发起！拥有和 web 生态一样的简单性。这个简单的接口带来了类似 IFTTT 的简单和灵活。你可以将任何 event 通知给 Adapter。</p><p>前边有两个案例，是基于这个接口做的：</p><p><a href="https://adapter.codelab.club/extension_guide/Calypso/" target="_blank" rel="noopener noreferrer">Calypso</a> 以及 Kano 魔杖。以下是 Kano 魔杖的案例：</p><video src="https://adapter.codelab.club/video/1576905337206766.mp4" controls=""></video><p>更有想象力的事情是，使用 Ngrok 之类的工具，将该接口暴露到公共互联网，如此一来，我们甚至可以在教学直播中，让远方的学生与演播厅的整个可编程空间互动，可以是多人！</p><p>前边的场景不过也是一种<strong>连接</strong>罢了，虽然可能跨越半个地球。 </p><p>Adapter 专注在连接，并使其简易。</p><p>尤其值得一提的是，我们充分考虑了安全性，即便暴露到公共网络，它也是安全的！</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="提升-windows-平台的使用体验"></a>提升 Windows 平台的使用体验<a aria-hidden="true" tabindex="-1" class="hash-link" href="#提升-windows-平台的使用体验" title="Direct link to heading">#</a></h2><p>由于许多用户在使用 Windows 平台，而我自己则主要在用 MacOS 和 Linux，之前忽视了 Windows 平台下的使用体验。</p><p>@Hanson 同学在使用 CodeLab Adapter 过程中，不只在班级博客中写了推荐文章:<a href="https://rcfclass7.wordpress.com/2020/04/24/%e4%bd%bf%e7%94%a8codelab-adapter%e6%89%a9%e5%b1%95scratch/" target="_blank" rel="noopener noreferrer">使用 Codelab-Adapter 扩展 Scratch</a>（文章中对 Adapter 架构的理解非常精确），还给出了许多反馈和建议, 这些改进建议，多数在 3.2 中付诸实施。</p><p>其中最大的一项改进是:</p><blockquote><p>HCI 运行时启动的 python 命令行程序可以改为.pyw 的隐藏程序</p></blockquote><p>将 Node 作为隐藏程序，不只是 @Hanson 同学提出，其他用户也多次提出，在 3.2 中，这项工作已完成。</p><p>容我吐槽下 Windows，忍无可忍，在源码注释中竖了中指 🖕️，不准备删除：） Windows 拙劣得惊人。 在其中编程，仿若在泥塘与巨兽搏斗。推荐大家使用 Ubuntu系统，Ubuntu 是免费的，不需要重新购买计算机，直接安装 Ubuntu 即可使用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="增加自省能力"></a>增加自省能力<a aria-hidden="true" tabindex="-1" class="hash-link" href="#增加自省能力" title="Direct link to heading">#</a></h2><p>我们在<a href="https://www.codelab.club/blog/3-release/" target="_blank" rel="noopener noreferrer">发布 CodeLab Adapter 3.0</a> 讨论<strong>自省</strong>时说到</p><blockquote><p>自省的意思是说事物理解它自身的状态，当我们说一个事物 智能 的时候，很多时候和它的自省能力有关。</p></blockquote><p>3.2 进一步增强 Adapter 的自省能力，于是我们可以做到一些智能的行为，诸如在程序启动时，自动更新最新的 Adapter Client，这样使用 Adapter Node 时，无需再操心环境依赖问题。</p><p>这也是 3.2 对易用性的最大改进之一。</p><p>导致这项改进的背景是，Cozmo 社区的许多用户，是没有技术背景的奶爸，他们使用 CodeLab Adapter 来驱动孩子们喜欢的 Cozmo，让他们在 Scratch 里同时驱动 Cozmo 和 Vector:</p><video src="https://adapter.codelab.club/video/where-did-the-human-go.mp4" controls=""></video><p>但他们经常会对文档中一些我们(工程师们)认为非常基础的概念产生疑惑，诸如 pip 是什么，命令行怎么打开，他们给我发邮件，他们感到困惑的地方，让我有点惊讶。</p><p>但我们要承认，对创造感兴趣的并非都是工程师，如何让非技术背景的用户更加易于使用，是我们不断增强 Adapter 自省能力的原因。通过增加自省能力，来自动化完成一些需要手动操作的技术活。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="完善插件体系"></a>完善插件体系<a aria-hidden="true" tabindex="-1" class="hash-link" href="#完善插件体系" title="Direct link to heading">#</a></h2><p>3.2 中，对插件体系有 2 大改进：</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="插件市场"></a>插件市场<a aria-hidden="true" tabindex="-1" class="hash-link" href="#插件市场" title="Direct link to heading">#</a></h3><p><img src="https://adapter.codelab.club/img/57c8980da375649292ff3fc158e71bae.png"></p><p>插件市场现在同时支持 Node 和 Extension，用户可以将自己创建的插件，分享给社区用户。而且我们允许 Node 托管在互联网的任何区域！</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="可扩展的插件-meta-信息"></a>可扩展的插件 Meta 信息<a aria-hidden="true" tabindex="-1" class="hash-link" href="#可扩展的插件-meta-信息" title="Direct link to heading">#</a></h3><p>3.2 中，我们使用静态分析(ast) 从 Node/Extension 中动态提取 meta 信息。这些信息用于为插件排序，以及为 UI 提供插件附属信息。其中关于添加图标和描述信息的想法，来自Longan团队的产品经理@yuchen，目前3.2中已经实现。</p><p><img src="https://adapter.codelab.club/img/a884c24a566089e8d87ce339fab0efdd.png"></p><p>此外， 第三方公司在构建自己的扩展时，可以随意自定义信息给自定义的前端 UI 使用，这样一来具有极高的灵活度。</p><p>这是我第一次写静态分析相关的代码。把代码当数据来操控的想法实在太有意思了！它给人一种无所不能的快乐。</p><p>把代码当数据来操控的想法在 LISP 社区很盛行，但在学习 LISP 的时候（《SICP》和《The Little Schemer》）围绕这个话题读了不少资料，却总有一种隔阂感，后来 Seymour 和蒙台梭利关于“实践”的论点打动我，便习惯了 learning by doing。由于近期希望在代码运行之前提取 Meta 信息，如此一来对代码的静态分析，就成为眼前事，那些能够方便解析和操控静态代码的工具和语言(hylang)，像 ast，之前觉得复杂而冗长，这两天却呈现出前所未有的趣味。</p><p>ast 模块的 api 惊人地优美。这些 api 在我之前看来，是一堆与我无关的结构，只能凭借记忆和无聊的练习去反复适应它。当我最近试着手动处理代码结构，处处碰壁，再次看到 ast，惊为天人。这时，理解只是轻松的副产物。或许可以作为 seymour 关于“建构主义”所做讨论的案例注脚。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="其他改进"></a>其他改进<a aria-hidden="true" tabindex="-1" class="hash-link" href="#其他改进" title="Direct link to heading">#</a></h1><p>其他的改进，如:</p><ul><li>日志滚动存放 30 天，逾期清除，避免占用太多计算机存储空间</li><li>Adapter退出时，UI 弹出(alert)提醒，而不是显示断开加载中(之前有几位用户对此感到困惑)</li><li>软件启动时，使用线程自动检查环境信息，并提取到全局</li><li>将一些辅助函数移往 adapter client，使得构建 Node 更为容易。</li><li>...</li></ul><p>不在此一一列出，我们近期将一起更新到changelog里。</p></section><footer class="row margin-vert--lg"><div class="col"><strong>标签：</strong><a class="margin-horiz--sm" href="/blog/tags/code-lab相关">CodeLab相关</a><a class="margin-horiz--sm" href="/blog/tags/adapter">Adapter</a><a class="margin-horiz--sm" href="/blog/tags/技术文档">技术文档</a></div></footer></article><div><a href="https://github.com/CodeLabClub/NewCodeLabWeb/tree/master/blog/3_2-release.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/05/12/explorable-physical-space"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">« 支持交互探索的 CodeLab可编程空间</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/04/29/可编程空间"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">CodeLab 可编程空间 背后的理念与设计原则 »</div></a></div></nav></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="http://discuss.codelab.club/" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="http://discuss.codelab.club/">CodeLab 论坛</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/CodeLab-handbook">手册</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2020/08/20/tools">下载</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2020/04/01/欢迎关注CodeLab微信公众号">微信公众号</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.zhihu.com/people/codelab-83" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://www.zhihu.com/people/codelab-83">在知乎</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://space.bilibili.com/607249092" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://space.bilibili.com/607249092">在B站</a></li></ul></div></div><div class="text--center"><div>Copyright © 2022 CodeLab&nbsp&nbsp&nbsp<a style="color:white" target="_blank" href="https://beian.miit.gov.cn/">粤ICP备2021005905号-1</a><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3be250eb38d350c4a750c4b0bbfe513e";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></div></div></div></footer></div>
<script src="/styles.71fb8b2a.js"></script>
<script src="/runtime~main.676e3002.js"></script>
<script src="/main.aad9f3c1.js"></script>
<script src="/1.af123087.js"></script>
<script src="/2.2944d33e.js"></script>
<script src="/3.ffbe02f2.js"></script>
<script src="/ccc49370.9d6295d9.js"></script>
<script src="/9b708f43.a8a3c65e.js"></script>
</body>
</html>