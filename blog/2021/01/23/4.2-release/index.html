<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js/dist/video-js.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@videojs/themes@1/dist/fantasy/index.css">
<script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lettering.js/0.6.1/jquery.lettering.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/video.js/dist/video.min.js"></script>
<script src="/script/settheme.js"></script><title data-react-helmet="true">发布 CodeLab Adapter 4.2 | CodeLab</title><meta data-react-helmet="true" property="og:title" content="发布 CodeLab Adapter 4.2 | CodeLab"><meta data-react-helmet="true" name="description" content="由于一种奇妙的牵强附会，恰恰就是我们今生的苦痛被说成了来世生活较好的道理。我们切不可把这种道理运用到其它方面。假若你向一个人买了十打鸡蛋，头一打全是臭的，你总不会推断下余九打一定其好无比 --《西方哲学史》"><meta data-react-helmet="true" property="og:description" content="由于一种奇妙的牵强附会，恰恰就是我们今生的苦痛被说成了来世生活较好的道理。我们切不可把这种道理运用到其它方面。假若你向一个人买了十打鸡蛋，头一打全是臭的，你总不会推断下余九打一定其好无比 --《西方哲学史》"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/styles.84b1147b.css">
<link rel="preload" href="/styles.71fb8b2a.js" as="script">
<link rel="preload" href="/runtime~main.676e3002.js" as="script">
<link rel="preload" href="/main.aad9f3c1.js" as="script">
<link rel="preload" href="/1.af123087.js" as="script">
<link rel="preload" href="/2.2944d33e.js" as="script">
<link rel="preload" href="/3.ffbe02f2.js" as="script">
<link rel="preload" href="/ccc49370.9d6295d9.js" as="script">
<link rel="preload" href="/41d05392.341266f4.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a><a href="https://create.codelab.club" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">创作平台</a><a class="navbar__item navbar__link" href="/projects">玩给你看</a><a href="https://create.codelab.club/ideas#course" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">课程</a><a href="https://adapter.codelab.club/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">博客</a><a class="navbar__item navbar__link" href="/blog/2020/09/25/about-codelab-2020">关于我们</a><a href="https://github.com/CodeLabClub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://create.codelab.club" target="_blank" rel="noopener noreferrer" class="menu__link">创作平台</a></li><li class="menu__list-item"><a class="menu__link" href="/projects">玩给你看</a></li><li class="menu__list-item"><a href="https://create.codelab.club/ideas#course" target="_blank" rel="noopener noreferrer" class="menu__link">课程</a></li><li class="menu__list-item"><a href="https://adapter.codelab.club/" target="_blank" rel="noopener noreferrer" class="menu__link">文档</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/2020/09/25/about-codelab-2020">关于我们</a></li><li class="menu__list-item"><a href="https://github.com/CodeLabClub" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_kDB-">发布 CodeLab Adapter 4.2</h1><div class="margin-vert--md"><time datetime="2021-01-23T00:00:00.000Z" class="blogPostDate_2HVl">2021年1月23日   · 2 min 阅读时长</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><p><img src="https://adapter.codelab.club/img/candy_4_2_bar.jpeg"></p><blockquote><p>由于一种奇妙的牵强附会，恰恰就是我们今生的苦痛被说成了来世生活较好的道理。我们切不可把这种道理运用到其它方面。假若你向一个人买了十打鸡蛋，头一打全是臭的，你总不会推断下余九打一定其好无比 --《西方哲学史》</p></blockquote><blockquote><p>明天就像是盒子里的巧克力糖 --《一千零一個愿望》</p></blockquote><p>可明日叵测。</p><p>改进如果不是在当下，则可能永远不会发生。</p><hr><p>我们在过去总是想着把易用性放在体系成熟之后来做。</p><p>明日何其多。</p><p>4.2 版本专注当下，这个版本的大多数工作，都为了解决用户反馈的不爽之处。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="优化体验"></a>优化体验<a aria-hidden="true" tabindex="-1" class="hash-link" href="#优化体验" title="Direct link to heading">#</a></h1><p>开箱可用是我们追逐的目标。</p><p>Scratch 在这块所做的设计依然是我们学习的榜样，在 Scratch 中连接乐高的体验，让任何人都感到身心愉悦。</p><p>Adapter 正在往这个方向努力。</p><p>4.2 中，我们新增了 6 款设备支持 Scratch 风格的发现/连接机制，有了直观的连接机制，许多说明文档就不再需要，而且在意外发生时，用户能在界面上直观看到发生了什么，而不是猜测幕后发生了什么，这对排查问题以及减少新手恐惧都很重要。</p><p>这些插件中，有三个是旧插件:</p><ul><li>Cozmo</li><li>Robomaster</li><li>Tello</li></ul><p>三个新插件:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="brainco"></a>BrainCo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#brainco" title="Direct link to heading">#</a></h2><blockquote><p>Train Your Brain.</p></blockquote><p><img src="https://adapter.codelab.club/img/brainCo.jpeg"></p><video width="50%" src="https://adapter.codelab.club/video/brainco_tello.mp4" controls=""></video><p>BrainCo 目前在探索跟英荔的合作可能性，英荔是 CodeLab 的合作伙伴，从 4.2 版本开始，我们开始重点关注合作项的推进和落地，并在这个过程中，根据用户反馈改进软件体系。这是我们在方法论上做的调整: 服务具体用户，并从中获取改进建议。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="lego-mario"></a>LEGO Mario<a aria-hidden="true" tabindex="-1" class="hash-link" href="#lego-mario" title="Direct link to heading">#</a></h2><blockquote><p>登登登等灯蹬</p></blockquote><p><img src="https://adapter.codelab.club/img/lego_mario_bar.png"></p><video width="80%" src="https://adapter.codelab.club/video/legomario.MP4" controls=""></video><p>我在小学的许多个暑假里，热衷于在马里奥游戏里找彩蛋，倒不急着通关。最喜欢的两个彩蛋，其一是 <strong>3-1关</strong> 快到终点时，在阶梯上踩那只会飞的鸭子，来获取夸张的奖励。以及在爬到树顶的时候，快速按<code>左-右-跳</code>，闪现到屏幕的另一侧。</p><p>有了 LEGO Mario，我们可以动手在桌面上建造关卡！</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sphero-rvr"></a>Sphero RVR<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sphero-rvr" title="Direct link to heading">#</a></h2><blockquote><p>RVR is made for makers, hackers, coders – and you.</p></blockquote><video width="80%" src="https://adapter.codelab.club/video/rvr345345.mp4" controls=""></video><p>Sphero RVR 拥有惊人的稳定性、精度和续航能力，Neverland 里这台 RVR 已经三天三夜没关机了，随时可以连上飞快跑起来。</p><p>由于 Adapter 4 内置了跨平台蓝牙驱动，我们轻松接入了 Sphero 全家桶。</p><p><img src="https://adapter.codelab.club/img/sphero_all.png"></p><p>Sphero 在全球教育/玩具市场都很受欢迎。</p><hr><p>为了让 Adapter Node 更好支持 Scratch 风格的发现/连接机制，构建了一个抽象类: AdapterThing。 我们目前将 AdapterThing 视为在 Adapter 里接入硬件设备的最佳实践，文档参考: <a href="https://adapter.codelab.club/extension_guide/AdapterThing/" target="_blank" rel="noopener noreferrer">Adapter Thing</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="新插件"></a>新插件<a aria-hidden="true" tabindex="-1" class="hash-link" href="#新插件" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sugar"></a>Sugar<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sugar" title="Direct link to heading">#</a></h2><p><img src="https://adapter.codelab.club/img/sugar_bar.jpeg"></p><p>构建 Sugar 插件的动机最初来自 @Lounsen 的想法: 接布尔量的 hat 积木。</p><p>Sugar 插件是个实验室，试图为 Scratch 提供 <strong>甜</strong> 的语法糖。</p><p>新的想法/需求，欢迎在<a href="https://discuss.codelab.club/t/topic/169" target="_blank" rel="noopener noreferrer">这个帖子</a>下讨论</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="积木介绍"></a>积木介绍<a aria-hidden="true" tabindex="-1" class="hash-link" href="#积木介绍" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="接布尔量的-hat-积木"></a>接布尔量的 hat 积木<a aria-hidden="true" tabindex="-1" class="hash-link" href="#接布尔量的-hat-积木" title="Direct link to heading">#</a></h4><ul><li><a href="https://scratch-beta.codelab.club/?sb3url=https://adapter.codelab.club/sb3/Scratch-when-true.sb3">Demo</a></li></ul><p>除非情况发生变化，否则只触发 <strong>一次</strong> .</p><p>如果 <strong>我的变量</strong> 一直 <strong>&lt;</strong> 50，只向前移动一次.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="插件改进"></a>插件改进<a aria-hidden="true" tabindex="-1" class="hash-link" href="#插件改进" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="支持-microbit-v2"></a>支持 micro:bit v2<a aria-hidden="true" tabindex="-1" class="hash-link" href="#支持-microbit-v2" title="Direct link to heading">#</a></h2><p>最近收到的用户邮件里，最多的提议是:</p><blockquote><p> 使 micro:bit v2 在 Adapter 里开箱可用。</p></blockquote><p>4.2 已经完成了这项功能。micro:bit v1 和 v2 默认开箱可用。</p><p>此外，在 microbit radio 插件中，v1 和 v2 可以混着用。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="重构"></a>重构<a aria-hidden="true" tabindex="-1" class="hash-link" href="#重构" title="Direct link to heading">#</a></h1><p>基于出色的 Dynaconf 重构了 settings 机制。 </p><p>此前 Adapter 的配置机制十分复杂，而复杂通常是脆弱的同义词。</p><p>为了给用户更多自由以及遵循 unix 传统，我们从一开始就支持用户配置文件以及环境变量。</p><p>手动处理不同优先级的配置项带来了许多杂乱和复杂性，我之前很害怕进入 settings 代码所处的沼泽。</p><p>4.2版本通过引入 Dynaconf ，希望能彻底解决这个问题，使配置项变得简单、灵活、统一。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="其他改进项"></a>其他改进项<a aria-hidden="true" tabindex="-1" class="hash-link" href="#其他改进项" title="Direct link to heading">#</a></h1><ul><li>解决 WebUI 缩放时，页面失调问题</li><li>支持云端更新配置(<code>global_settings.toml</code>)</li><li>提供 node 版本服务（静态分析），允许 client 自动检测 node 版本</li><li>统一所有 url 中的 adapter_token 参数（为将来灵活的安全机制打基础）</li><li>为 microbit 固件刷入添加 ui 反馈</li><li>使得 Python Kernel 插件可以向 scratch 传递 json（数据结构）</li><li>修复 windows 下 dynaconf 引起的路径错误问题(与<code>python -m</code>启动方式有关)</li><li>修复 BrainCo 在 windows 下的打包 bug</li><li>修复 马里奥 在 windows10 下的发现问题</li><li>支持马里奥掉线通知（UI 同步）</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="开始使用"></a>开始使用<a aria-hidden="true" tabindex="-1" class="hash-link" href="#开始使用" title="Direct link to heading">#</a></h1><p><a href="https://adapter.codelab.club/get_start/gs_install/?version=latest" target="_blank" rel="noopener noreferrer">下载最新 Adapter</a>。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="参考"></a>参考<a aria-hidden="true" tabindex="-1" class="hash-link" href="#参考" title="Direct link to heading">#</a></h1><ul><li><a href="https://adapter.codelab.club/changelog/" target="_blank" rel="noopener noreferrer">CodeLab Adapter changelog</a></li></ul></section><footer class="row margin-vert--lg"><div class="col"><strong>标签：</strong><a class="margin-horiz--sm" href="/blog/tags/code-lab">CodeLab</a></div></footer></article><div><a href="https://github.com/CodeLabClub/NewCodeLabWeb/tree/master/blog/4.2-release.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/02/07/4.3-release"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">« 发布 CodeLab Adapter 4.3</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/01/19/CodeLab博文汇总"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">在阅读中认识CodeLab——博文汇总 »</div></a></div></nav></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="http://discuss.codelab.club/" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="http://discuss.codelab.club/">CodeLab 论坛</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/CodeLab-handbook">手册</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2020/08/20/tools">下载</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2020/04/01/欢迎关注CodeLab微信公众号">微信公众号</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.zhihu.com/people/codelab-83" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://www.zhihu.com/people/codelab-83">在知乎</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://space.bilibili.com/607249092" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://space.bilibili.com/607249092">在B站</a></li></ul></div></div><div class="text--center"><div>Copyright © 2022 CodeLab&nbsp&nbsp&nbsp<a style="color:white" target="_blank" href="https://beian.miit.gov.cn/">粤ICP备2021005905号-1</a><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3be250eb38d350c4a750c4b0bbfe513e";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></div></div></div></footer></div>
<script src="/styles.71fb8b2a.js"></script>
<script src="/runtime~main.676e3002.js"></script>
<script src="/main.aad9f3c1.js"></script>
<script src="/1.af123087.js"></script>
<script src="/2.2944d33e.js"></script>
<script src="/3.ffbe02f2.js"></script>
<script src="/ccc49370.9d6295d9.js"></script>
<script src="/41d05392.341266f4.js"></script>
</body>
</html>